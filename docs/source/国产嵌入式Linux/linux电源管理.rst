linux电源管理
==================

PowerManagement系统，不用时关闭电源、将系统切换到低功耗状态，对应为电源状态管理、省电管理，涉及电源供电、电源状态管理、运行时电源管理、电源省电管理、低功耗。



电源状态管理: 开机、关机、重启。具体而言：

- 睡眠(Sleep)，也叫Suspend to RAM(STR)，将系统状态信息保存到内存，内存供电，其他断电，在内核中睡眠称为Suspend。
- 休眠(Hibernate)，也叫Suspend to Disk(STD)，将系统状态信息保存到磁盘，系统断电
- 重启(Restart)，reboot、halt、poweroff
- 关机(Shutdown)，reboot、halt、poweroff

省电管理:

- CPU动态调频(CPUFreq)，降频省电，兼顾性能和负载
- 设备动态调频(DevFreq)
- CPUIdle，当某个CPU上没有进程可调度时局部关闭该核电源，有进程时再启用
- CPU Hotplug，把某个核热移除，系统就不会再往该核派任务，可放心关闭该核电源，再热插入后恢复供电就可正常执行任务
- Runtime PM，动态电源管理，关闭不用的设备的电源以减少功耗
- PM QoS


Suspend
-------------------

睡眠或休眠，实质都是保存系统上下文(到内存或磁盘)再挂起，再等待唤醒(wakeup)。

Linux Kernel支持的休眠的方式可在 /sys/power/state 中检查，常见以下的机种：

* freeze，冻结I/O设备，并将其置于低功耗状态，使处理器进入空闲，处于S2Idle状态时，设备中断可将其唤醒。
* Standby，除freeze的操作外，暂停系统，由于系统核心逻辑单元保持上电，操作的状态不会丢失，也容易恢复到之前的状态。需要设置唤醒源。
* mem，将运行状态数据存到内存，关闭外设，进入等待模式，除了需要内存自刷新来保持数据外，其他所有设备都需进入到低功耗状态（STR）。
* disk，将运行状态数据保存到磁盘，掉电（生态），如按下电源键进行唤醒和恢复，唤醒过程最慢。

功耗节省效果依次增强，唤醒时间开销依次加大。